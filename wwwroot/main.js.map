{"version":3,"file":"main.js","mappings":";;;;;;;;;;AAAa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,mBAAO,CAAC,sBAAQ;AACjD;AACA;AACA;AACA;AACA;AACA,sGAAsG,uCAAuC;AAC7I,mGAAmG,oCAAoC;AACvI;AACA;AACA,mGAAmG,SAAS;AAC5G,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA;AACA,gEAAgE,SAAS;AACzE,+DAA+D,SAAS;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,SAAS;AACpF,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB,2BAA2B,aAAa;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F;AAC9F,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB,0BAA0B,SAAS;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,GAAG;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;AC5KY;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,iCAAiC,mBAAO,CAAC,sBAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;;;;;;;;;;ACtBtB;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;;ACtBa;AACb,6BAA6C,EAAE,aAAa,CAAC;AAC7D,mBAAO,CAAC,+CAAiB;AACzB,mBAAO,CAAC,iDAAkB","sources":["webpack://demo-boeing-peoplesoft/./src/createAccount.ts","webpack://demo-boeing-peoplesoft/./src/overlayControl.ts","webpack://demo-boeing-peoplesoft/external var \"jQuery\"","webpack://demo-boeing-peoplesoft/webpack/bootstrap","webpack://demo-boeing-peoplesoft/./src/main.ts"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst jquery_1 = __importDefault(require(\"jquery\"));\nconst highlightColors = 'border-red-500 background-red-100';\nclass AccountCreationUtil {\n    constructor($form) {\n        this.$form = $form;\n        this.$form.on('submit', e => this.onSubmit(e));\n        this.$form.find('#Username').on('blur', (e) => __awaiter(this, void 0, void 0, function* () { return yield this.onCheckUsername(e); }));\n        this.$form.find('#Email').on('blur', (e) => __awaiter(this, void 0, void 0, function* () { return yield this.onCheckEmail(e); }));\n    }\n    addValidationError(msg, ctrlName) {\n        const $list = (0, jquery_1.default)('.form-summary ul'), $ctrl = (0, jquery_1.default)(`#${ctrlName}`);\n        let $existing = $list.find(`li[data-for=\"${ctrlName}\"]`);\n        if ($existing.length) {\n            $existing.find('label').text(msg);\n        }\n        else {\n            const $error = (0, jquery_1.default)(`<label for=\"${ctrlName}\"/>`).text(msg);\n            $existing = (0, jquery_1.default)(`<li data-for=\"${ctrlName}\"/>`);\n            $existing.append($error);\n            $list.append($existing.show());\n        }\n        $ctrl.addClass(highlightColors);\n    }\n    clearError(ctrlName) {\n        const $error = (0, jquery_1.default)(`.form-summary li[data-for=\"${ctrlName}\"]`);\n        const $ctrl = (0, jquery_1.default)(`#${ctrlName}`);\n        $error.length && $error.remove();\n        $ctrl.length && $ctrl.removeClass(highlightColors);\n    }\n    /**\n     * Check to see if the email address is already registered\n     * @param e\n     */\n    onCheckEmail(e) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const $t = (0, jquery_1.default)(e.target);\n            const emailAddress = ($t.val() || '').trim();\n            if (emailAddress.length) {\n                const checkEmailAddress = new Promise((resolve, reject) => {\n                    try {\n                        fetch(`${siteConfig.backendUrl}/api/account/emailExists/${emailAddress}`)\n                            .then(resp => {\n                            if (!resp.ok) {\n                                this.addValidationError('oops, something went wrong', 'Email');\n                            }\n                            else {\n                                return resp.json();\n                            }\n                        })\n                            .then((data) => {\n                            if (typeof data === 'object') {\n                                if (data.error) {\n                                    this.addValidationError(data.error, 'Email');\n                                }\n                                else if (data.emailExists) {\n                                    this.addValidationError('Email address is already registered', 'Email');\n                                }\n                                else {\n                                    this.clearError('Email');\n                                }\n                            }\n                            else\n                                this.addValidationError('Backend returned unexpected results; Try again later', 'Email');\n                        });\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                });\n                yield checkEmailAddress;\n            }\n            else {\n                this.addValidationError('Email address is required', 'Email');\n            }\n        });\n    }\n    /**\n     * Check to see if the username is already in use\n     * @param e\n     */\n    onCheckUsername(e) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const $t = (0, jquery_1.default)(e.target);\n            const username = ($t.val() || '').trim();\n            if (username.length) {\n                const checkUsername = new Promise((resolve, reject) => {\n                    try {\n                        fetch(`${siteConfig.backendUrl}/api/account/userExists/${username}`)\n                            .then(resp => {\n                            if (!resp.ok) {\n                                this.addValidationError('oops, something went wrong', 'Username');\n                            }\n                            else {\n                                return resp.json();\n                            }\n                        })\n                            .then((data) => {\n                            if (data.error) {\n                                this.addValidationError(data.error, 'Username');\n                            }\n                            else if (data.userExists) {\n                                this.addValidationError('Username already exists', 'Username');\n                            }\n                            else {\n                                this.clearError('Username');\n                            }\n                        });\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                });\n                yield checkUsername;\n            }\n            else {\n                this.addValidationError('Username is required', 'Username');\n            }\n        });\n    }\n    /**\n     * Check the form\n     * @param e\n     * @returns\n     */\n    onSubmit(e) {\n        let validState = true;\n        let values = {};\n        ',Username,Password,Password2,Email,Name'.split(',').filter(s => s.length).forEach(fn => {\n            const $inp = (0, jquery_1.default)(`#${fn}`);\n            const val = $inp.val().trim();\n            values[fn] = val;\n            if (val.length === 0) {\n                $inp.addClass(highlightColors);\n                validState = false;\n            }\n            else {\n                $inp.removeClass(highlightColors);\n            }\n        });\n        if (values['Password'] !== values['Password2']) {\n            const $ctrl = (0, jquery_1.default)('#Password2');\n            this.addValidationError('Passwords do not match', 'Password2');\n            $ctrl.val('');\n            $ctrl.focus();\n        }\n        if (!validState) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        return validState;\n    }\n}\nexports.default = AccountCreationUtil;\n(0, jquery_1.default)(document).ready(() => {\n    const $form = (0, jquery_1.default)('#createUserForm, #uploadProfilePicture');\n    if ($form.length === 1) {\n        const util = new AccountCreationUtil($form);\n    }\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OverlayControl = void 0;\nconst jquery_1 = __importDefault(require(\"jquery\"));\nclass OverlayControl {\n    constructor() {\n        this.$element = (0, jquery_1.default)('blogOverlay');\n    }\n    hide() {\n        if (this.$element.hasClass('active')) {\n            this.$element.removeClass('active');\n        }\n    }\n    show() {\n        if (!this.$element.hasClass('active')) {\n            this.$element.addClass('active');\n        }\n    }\n}\nexports.OverlayControl = OverlayControl;\n","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"./createAccount\");\nrequire(\"./overlayControl\");\n"],"names":[],"sourceRoot":""}